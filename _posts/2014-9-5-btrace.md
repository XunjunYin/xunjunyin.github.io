---
layout: post
title: btrace
---

## 部署
* []btrace1.2.5.1](https://kenai.com/projects/btrace)已经部署到集群
  * /home/xjyin/btrace-1.2.5.1
## 使用方式
* 基本使用方式

        sh /btrace-1.2.5.1/bin/btrace <pid>  <your .java btrace class>

## 实战
* 动态观察指定进程中所有产生throwable(包括被吞掉的exception)的逻辑（打出stacktrace）

		sh ~/xjyin/btrace-1.2.5.1/bin/btrace <pid>  ~/xjyin/btrace-1.2.5.1/myClasses/OnThrow.java > exception.log
* 更多例子见 ~/xjyin/btrace-1.2.5.1/samples/

## 注意
* **线上要谨慎使用**
  * 我用btrace attach线上的resin进程再退出后，发现resin进程cpu使用率较高，load达到40左右，重启后恢复，原因尚未确定，因此尽量在测试环境使用
